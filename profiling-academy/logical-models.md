## 参考资料

- https://simplifier.net/guide/profilingacademy/Logicalmodels

## 简介

在本文中, 你将会学习到逻辑模型的具体内容. 我们使用 Forge 官方的 HL7®FHIR® 补充规范编辑器, 来创建我们的补充规范, 你可以 免费下载 Forge

本文包含的内容有:

- 逻辑模型是什么?
- 什么时候使用, 以及使用它的优点是什么?
- 如何使用, 以及如何把它们映射到 FHIR 资源
- 如何在 Forge 中创建逻辑模型

## 什么是逻辑模型

逻辑模型在树模型中可视化域的方式与显示资源或配置文件的方式相同。该模型描述了您的数据集，并由具有一个或多个（子）元素的主干元素组成。数据集中的每个元素都应该指定一个类型，可以是资源、数据类型或自定义类型。逻辑模型可用于描述多个资源或数据对象，或单个资源或数据对象。该模型可作为构建最终概要文件和实现指南的输入。

## 什么时候使用逻辑模型

逻辑模型可用于在早期设计过程中传达业务需求（数据集、基数、术语）。逻辑模型在与临床医生或其他领域专家交谈时非常有用，以收集需求，而不直接局限于fhir规范

### 逻辑模型和补充规范(Profiles)的比较

尽管在设计过程中不需要使用逻辑模型，但与直接开始构建补充规范(Profiles)相比，它有一些优势：

- 逻辑模型需要最少的FHIR知识
- 模型结构中没有约束
- 逻辑模型允许您捕捉和记录所有需求
- 逻辑模型在业务和技术实现之间起到桥梁的作用

但是请注意，在某个时间点，您将需要基于逻辑模型构建补充规范(Profile)。逻辑模型很可能包含不符合FHIR规范的需求。在设计过程中需要预留时间来将逻辑模型转换为实际的补充规范。注意创建非常具体的模型的风险，这些模型会导致潜在的返工和重新设计。因此，有些人可能更喜欢直接开始构建补充规范。当然，选择也取决于你的领域专家和他们对FHIR的熟悉程度。逻辑模型在与业务或临床社区的交互中可能起到非常强大的作用.

### 详细临床模型

逻辑模型的另一个用途是描述详细的临床模型（DCM）。DCM是一种基本的信息块，它提供了一种结合专家知识、数据规范和术语来构造医疗信息的方法。这些构建块独立于使用它们的上下文或技术实现。例如，您可以描述一个血压模型，并使用该模型配置一个EHR，或者使用CDA、HL7 v2、FHIR或任何其他标准来交换数据。他们的目标是通过确保医疗保健机构和应用程序使用相同的共同要求，支持在不同的医疗保健机构和应用程序之间一致地使用医疗数据。这将使组织更容易支持多个技术标准来交换相同的信息。但是，这仍然需要从DCM到FHIR或例如CDA的映射。请注意，这些交换标准有自己的要求和限制，如果要将DCMS映射到多个交换标准，可能会导致信息丢失。

## 如何使用逻辑模型

在设计过程的早期使用逻辑模型时，输出将是一个或多个描述所需数据元素及其基数、数据类型和可能值的逻辑模型。逻辑模型通常也会标识所需的值集。下一步是将逻辑模型转换为一个或多个概要文件。首先，您需要确定哪些资源可以映射您的逻辑模型。在某些情况下，这很容易，例如，将患者模型映射到患者资源是很自然的。在其他情况下，选择将不那么明确。例如，假设您已经模拟了一个临床路径。您可能需要在多个资源中捕获此信息（例如预约、诊断请求、过程等）。在完成设计过程之后，您的逻辑模型可以用来共享业务需求，但是实际的FHIR实现将取决于相应的补充规范。

## 如何在 Forge 中创建逻辑模型

Forge 支持创建逻辑模型。假设我们要为汽车创建一个模型。在 Forge中，选择 **"New Logical Model"**（CTRL-M），然后在 **"properties"** 选项卡中更改名称、URL和文件名。例如，将您的车型命名为 `MyCar`。现在可以开始在元素树选项卡中添加元素。选择元素或主干元素。主干是具有子元素的元素，例如，可以添加名为 `motor` 的元素，并为品牌和类型添加子元素。对于每个元素，添加一个名称并选择此元素支持的另一个数据类型。您可以选择资源类型（例如个人）、数据类型（例如字符串）或自定义类型（例如您自己的模型或配置文件之一）。例如，您可以添加所有者并添加资源类型人员。您还可以更改元素的最小和最大基数。比如说一辆车可以有自己的主人，这个元素是强制性的。最后，您可以向值集添加绑定，例如特定的品牌或颜色代码列表。

![clipboard.png][1]

  [1]: https://segmentfault.com/img/bVbu5vf
